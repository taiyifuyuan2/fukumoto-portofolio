<div class="max-w-7xl mx-auto">
  <div class="flex justify-between items-center mb-8">
    <h1 class="text-3xl font-bold text-gray-900">プロジェクト管理</h1>
    <%= link_to '新規作成', new_admin_project_path, class: 'btn-primary' %>
  </div>

  <div class="table">
    <table class="min-w-full">
      <thead>
        <tr>
          <th>画像</th>
          <th>タイトル</th>
          <th>カテゴリ</th>
          <th>技術</th>
          <th>お気に入り</th>
          <th>操作</th>
        </tr>
      </thead>
      <tbody>
        <% @projects.each do |project| %>
          <tr>
            <td>
              <% if project.image_url.present? %>
                <img src="<%= project.image_url %>" alt="<%= project.title %>" class="h-16 w-16 object-cover rounded">
              <% else %>
                <div class="h-16 w-16 bg-gray-200 rounded flex items-center justify-center">
                  <span class="text-gray-400">No Image</span>
                </div>
              <% end %>
            </td>
            <td>
              <div class="text-sm font-medium text-gray-900"><%= project.title %></div>
              <div class="text-sm text-gray-500"><%= truncate(project.description, length: 100) %></div>
            </td>
            <td>
              <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-100 text-blue-800">
                <%= project.category %>
              </span>
            </td>
            <td>
              <div class="text-sm text-gray-900">
                <% project.technologies_array.first(3).each do |tech| %>
                  <span class="inline-block bg-gray-200 rounded-full px-2 py-1 text-xs font-semibold text-gray-700 mr-1 mb-1">
                    <%= tech %>
                  </span>
                <% end %>
                <% if project.technologies_array.length > 3 %>
                  <span class="text-gray-500">+<%= project.technologies_array.length - 3 %></span>
                <% end %>
              </div>
            </td>
            <td>
              <% if project.featured? %>
                <span class="text-yellow-500">⭐</span>
              <% end %>
            </td>
            <td class="text-sm font-medium">
              <%= link_to '表示', admin_project_path(project), class: 'text-blue-600 hover:text-blue-900 mr-3' %>
              <%= link_to '編集', edit_admin_project_path(project), class: 'text-green-600 hover:text-green-900 mr-3' %>
              <%= link_to '削除', admin_project_path(project), method: :delete, data: { confirm: '本当に削除しますか？' }, class: 'text-red-600 hover:text-red-900' %>
            </td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>
</div>
